# TODO



# Done

1. 使用prefab预制体创建了cell模板
   - Q:字体放大不清晰
   - A:使用TEXTMESHPRO
2. 在GameManager使用脚本批量创建cells,
   - Q:会出现多个cell聚集到一个区域,多个重叠
   - A:检测距离是否过近(==泊松圆盘分布==)
3. 使用字典(cell,cell),(edge,weight)来映射边和点的数据结构
4. 使用Delaunay triangulation创建网格图
   - Q:
     ![image-20250602221013088](https://raw.githubusercontent.com/stingo1218/pic/main/Typoraimage-20250602221013088.png)
   - A:(进行度数检查防止度数差异过大)/ 或者角度过小进行删去
5. eraseline的设计,用户可以按住右键使用切割线,线会切断经过的edges(如果这是规则允许的),也可以重新连回来
6. 重新连接:两个隔离的连通分量当被一条线连接时,如果成为了新的一个连通分量,那么就会检查初始的edges,进行重新连接
7. > - Inspector多选算法：支持选择多割算法（目前只有贪心算法）。
   >
   > - 贪心多割算法实现：初版为最大割，后修正为最小割（优先移除权重最小的边）。
   >
   > - 高亮切割边：实现了高亮显示需要切割的边（可用深红色或高亮材质）。
   >
   > - 关卡自适应缩放居中：生成点后自动缩放并居中，保证关卡适配全屏。
   >
   > - 修正连线错位问题：调整生成顺序，先归一化点再连线，保证线和点一致。
   >
   > - HINT按钮触发：将多割算法的执行逻辑移到点击HINT按钮时触发，只有需要提示时才高亮显示最佳切割边。

8. **Delaunay Refinement细分法集成** (2024-12-19)
   - **问题**：Delaunay三角剖分产生矮胖三角形，影响可视化和游戏体验
   - **解决方案**：集成Delaunay Refinement算法，自动检测并改善三角形质量
   - **实现细节**：
     - 计算三角形最小高/最长边比，识别不合格三角形
     - 在坏三角形外心插入新点，重新剖分
     - 循环迭代直到所有三角形满足质量要求或达到最大迭代次数
   - **参数设置**：`minHeightToEdgeRatio = 0.2f`，`maxRefineIters = 10`
   - **边界处理**：过滤细分插入点对应的边，避免索引越界

9. **标准多割算法实现** (2024-12-19)
   - **问题**：原算法限制连通分量数量，不符合标准多割问题定义
   - **解决方案**：修改为真正的标准多割问题，不限制连通分量数量
   - **算法改进**：
     - **ILP算法**：移除连通分量数量约束，使用循环不等式约束
     - **贪心算法**：移除连通分量数量目标，使用循环不等式检查
     - **目标函数**：最大化保留边的权重和（使用正数权重）

10. **权重系统优化** (2024-12-19)
    - **问题分析**：负数权重导致"全切"，正数权重导致"不切"
    - **解决方案**：使用正数权重 + 最大化目标函数
    - **权重含义**：权重越大表示边越重要，越不应该被切割
    - **算法行为**：
      - 保留重要的边（权重大的）
      - 切割不重要的边（权重小的）
      - 在满足循环不等式约束的前提下优化

11. **游戏设计优化** (2024-12-19)
    - **权重可视化建议**：根据权重设置边的视觉效果（粗细、颜色）
    - **玩家引导**：权重越大越重要，切割重要边时给出警告
    - **策略深度**：玩家需要权衡哪些边可以安全切割

